      <ng-template [ngIf]="isReady">

          <!-- <div *ngIf="isPopupOpen" class="popup pos-abs">I am the popup</div> -->
          <div class="pos-rel hw100">

              <s4-chart *ngIf="chart" [chartId]="chart.id" [format]="format" [options]="chart.options"></s4-chart>

              <s4-popup #reportPopup *ngIf="hasPopup" key="emphasisAreaDefinitions" [hasIcon]="false"
                  [anchorAlign]="{ horizontal: 'center', vertical: 'bottom' }"
                  [popupAlign]="{ horizontal: 'center', vertical: 'top' }"
                  [popupMargin]="{ horizontal: 25, vertical: -25 }">

              </s4-popup>
          </div>

      </ng-template>

      <loader *ngIf="!isReady" class="hw100 centered" type="embedded"></loader>
